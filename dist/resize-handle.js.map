{"version":3,"sources":["../src/resize-handle.jsx"],"names":["DOUBLE_CLICK_DELAY","ResizeHandle","props","handleTouchStart","event","start","touches","pageX","pageY","preventDefault","handleTouchMove","move","handleTouchEnd","end","handleMouseDown","_clickCount","setTimeout","Math","max","onResizeDoubleClick","handleMouseMove","handleMouseUp","handleMouseEnter","setState","hovering","handleMouseLeave","_pageX","_pageY","state","dragging","componentWillUnmount","releaseMouse","releaseTouch","render","styles","containerStyles","lineStyles","dimension","containerWidth","lineWidth","containerHeight","lineHeight","lineHover","captureTouch","captureMouse","onResizeStart","diffX","diffY","onResize","onResizeEnd","document","body","addEventListener","removeEventListener","Component","propTypes","func","string","defaultProps","position","top","right","bottom","width","cursor","backgroundColor","pointerEvents","left","height","opacity","borderRadius"],"mappings":"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","file":"resize-handle.js","sourcesContent":["/* eslint-disable react/style-prop-object */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst DOUBLE_CLICK_DELAY = 500;\n\nexport default class ResizeHandle extends React.Component {\n  static propTypes = {\n    onResizeStart: PropTypes.func,\n    onResize: PropTypes.func,\n    onResizeEnd: PropTypes.func,\n    onResizeDoubleClick: PropTypes.func,\n    dimension: PropTypes.string\n  };\n\n  static defaultProps = {\n    dimension: 'width'\n  };\n\n  constructor(props) {\n    super(props);\n\n    this._pageX = null;\n    this._pageY = null;\n    this._clickCount = 0;\n\n    this.state = {\n      dragging: false,\n      hovering: false\n    };\n  }\n\n  componentWillUnmount() {\n    this.releaseMouse();\n    this.releaseTouch();\n  }\n\n  render() {\n    const {styles} = ResizeHandle;\n\n    let containerStyles = null;\n    let lineStyles = null;\n\n    if (this.props.dimension === 'width') {\n      containerStyles = styles.containerWidth;\n      lineStyles = styles.lineWidth;\n    } else {\n      containerStyles = styles.containerHeight;\n      lineStyles = styles.lineHeight;\n    }\n\n    if (this.state.hovering || this.state.dragging) {\n      lineStyles = {\n        ...lineStyles,\n        ...styles.lineHover\n      };\n    }\n\n    return (\n      <div style={containerStyles}\n           onMouseEnter={this.handleMouseEnter}\n           onMouseLeave={this.handleMouseLeave}\n           onMouseDownCapture={this.handleMouseDown}\n           onTouchStartCapture={this.handleTouchStart}>\n        <div style={lineStyles} />\n      </div>\n    );\n  }\n\n  handleTouchStart = (event) => {\n    this.start(event.touches[0].pageX, event.touches[0].pageY);\n\n    event.preventDefault();\n  }\n\n  handleTouchMove = (event) => {\n    this.move(event.touches[0].pageX, event.touches[0].pageY);\n  }\n\n  handleTouchEnd = (event) => {\n    this.end();\n  }\n\n  handleMouseDown = (event) => {\n    this._clickCount++;\n\n    setTimeout(() => {\n      this._clickCount = Math.max(0, this._clickCount - 1);\n    }, DOUBLE_CLICK_DELAY);\n\n    if (this._clickCount > 1) {\n      this._clickCount = 0;\n\n      if (this.props.onResizeDoubleClick) {\n        this.props.onResizeDoubleClick();\n        event.preventDefault();\n        return;\n      }\n    }\n\n    this.start(event.pageX, event.pageY);\n\n    event.preventDefault();\n  }\n\n  handleMouseMove = (event) => {\n    this.move(event.pageX, event.pageY);\n  }\n\n  handleMouseUp = (event) => {\n    this.end();\n  }\n\n  start(pageX, pageY) {\n    this.setState({dragging: true});\n\n    this._pageX = pageX;\n    this._pageY = pageY;\n\n    this.captureTouch();\n    this.captureMouse();\n\n    if (this.props.onResizeStart) {\n      this.props.onResizeStart();\n    }\n  }\n\n  move(pageX, pageY) {\n    const diffX = pageX - this._pageX;\n    const diffY = pageY - this._pageY;\n\n    if (this.props.onResize) {\n      this.props.onResize(diffX, diffY);\n    }\n\n    this._pageX = pageX;\n    this._pageY = pageY;\n  }\n\n  end() {\n    this.releaseMouse();\n    this.releaseTouch();\n\n    if (this.props.onResizeEnd) {\n      this.props.onResizeEnd();\n    }\n\n    this.setState({dragging: false});\n  }\n\n  handleMouseEnter = (event) => {\n    this.setState({hovering: true});\n  }\n\n  handleMouseLeave = (event) => {\n    this.setState({hovering: false});\n  }\n\n  captureMouse() {\n    document.body.addEventListener('mousemove', this.handleMouseMove, true);\n    document.body.addEventListener('mouseup', this.handleMouseUp, true);\n  }\n\n  releaseMouse() {\n    document.body.removeEventListener('mousemove', this.handleMouseMove, true);\n    document.body.removeEventListener('mouseup', this.handleMouseUp, true);\n  }\n\n  captureTouch() {\n    document.body.addEventListener('touchmove', this.handleTouchMove, true);\n    document.body.addEventListener('touchend', this.handleTouchEnd, true);\n  }\n\n  releaseTouch() {\n    document.body.removeEventListener('touchmove', this.handleTouchMove, true);\n    document.body.removeEventListener('touchend', this.handleTouchEnd, true);\n  }\n}\n\nconst styles = {\n  containerWidth: {\n    position: 'absolute',\n    top: 0,\n    right: -9,\n    bottom: 0,\n    width: 16,\n    cursor: 'ew-resize',\n    backgroundColor: 'transparent',\n    // zIndex: 1, TODO(zhm) IE10 seems to need this zIndex to receive any mouse events, I think it ends up below everything somehow\n    pointerEvents: 'auto'\n  },\n\n  containerHeight: {\n    position: 'absolute',\n    left: 0,\n    bottom: -9,\n    right: 0,\n    height: 16,\n    cursor: 'ns-resize',\n    backgroundColor: 'transparent',\n    // zIndex: 1,\n    pointerEvents: 'auto'\n  },\n\n  lineWidth: {\n    position: 'absolute',\n    left: 6,\n    top: -2,\n    width: 5,\n    bottom: -1,\n    backgroundColor: 'transparent',\n    opacity: 1,\n    borderRadius: 0\n  },\n\n  lineHeight: {\n    position: 'absolute',\n    top: 5,\n    left: -1,\n    right: -1,\n    height: 5,\n    backgroundColor: 'transparent',\n    opacity: 1,\n    borderRadius: 0\n  },\n\n  lineHover: {\n    backgroundColor: '#18a3f7'\n  }\n};\n\nResizeHandle.styles = styles;\n"]}